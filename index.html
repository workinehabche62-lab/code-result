<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2018 Result</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root { 
            --primary: #004a99; 
            --accent: #ffcc00; 
            --danger: #e63946; 
            --success: #2ecc71; 
            --secondary: #f8f9fa; 
            --border: #dee2e6;
            --shadow: 0 12px 24px rgba(0,0,0,0.1);
        }
        
        body { 
            font-family: 'Roboto', sans-serif; 
            background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%); 
            margin: 0; 
            padding: 15px; 
            min-height: 100vh; 
        }

        .container { 
            max-width: 950px; 
            margin: 20px auto; 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 25px; 
            box-shadow: var(--shadow); 
            overflow: hidden; 
            backdrop-filter: blur(10px);
        }
        
        .lang-bar { background: #f1f3f5; padding: 15px; text-align: center; border-bottom: 1px solid #ddd; }
        .lang-btn { 
            background: white; border: 1px solid #cbd5e0; padding: 8px 16px; 
            margin: 4px; cursor: pointer; border-radius: 20px; font-weight: bold; 
            transition: all 0.3s; font-size: 13px; color: #4a5568;
        }
        .lang-btn:hover, .lang-btn.active { background: var(--primary); color: white; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .school-banner { 
            background: linear-gradient(135deg, #004a99 0%, #0066cc 100%); 
            color: white; padding: 35px 20px; text-align: center; 
            border-bottom: 8px solid var(--accent);
            position: relative;
        }
        
        .login-card { padding: 80px 20px; text-align: center; }
        input { 
            width: 90%; max-width: 380px; padding: 16px; margin: 12px 0; 
            border: 2px solid #edf2f7; border-radius: 12px; font-size: 16px; 
            transition: 0.3s; outline: none; box-sizing: border-box;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0,74,153,0.1); }
        
        .btn-main { 
            background: var(--primary); color: white; padding: 16px 60px; 
            border: none; border-radius: 12px; cursor: pointer; 
            font-weight: 900; font-size: 18px; margin-top: 20px; 
            transition: 0.3s; text-transform: uppercase;
        }
        .btn-main:hover { background: #003366; transform: scale(1.02); }

        #resultArea { display: none; padding: 40px; animation: slideUp 0.6s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .profile-header { text-align: center; margin-bottom: 35px; }
        .student-photo { 
            width: 150px; height: 150px; border-radius: 50%; 
            border: 6px solid white; object-fit: cover; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.15); margin: 0 auto 20px; display: block;
        }
        
        #pName { font-size: 32px; font-weight: 900; margin: 10px 0; text-transform: uppercase; }
        .name-green { color: #138808; }
        .name-yellow { color: #FCD116; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
        .name-red { color: #CD1319; }
        
        .status-passed { 
            color: #2ecc71 !important; font-weight: 900 !important; 
            font-size: 30px !important; letter-spacing: 2px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        .grid-info { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 15px; margin-bottom: 35px; 
        }
        .info-cell { 
            background: #ffffff; padding: 15px; border-radius: 12px; 
            border-bottom: 3px solid var(--primary); box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }
        .info-cell label { font-size: 11px; color: #a0aec0; font-weight: bold; text-transform: uppercase; }
        .info-cell div { font-size: 15px; font-weight: 700; color: #2d3748; margin-top: 4px; }

        .summary-ribbon { 
            display: flex; justify-content: space-around; 
            background: linear-gradient(135deg, #1a365d 0%, #2a4365 100%); 
            border-radius: 20px; padding: 25px; margin: 30px 0; color: white;
        }
        .ribbon-item span { font-size: 13px; opacity: 0.9; text-transform: uppercase; display: block; margin-bottom: 5px; }
        .ribbon-item b { font-size: 26px; }

        table { width: 100%; border-collapse: collapse; border-radius: 12px; overflow: hidden; background: white; }
        th { background: var(--primary); color: white; padding: 15px; font-size: 14px; text-transform: uppercase; }
        td { padding: 14px; border-bottom: 1px solid #edf2f7; text-align: center; color: #4a5568; font-size: 15px; }
        tr:hover { background-color: #f7fafc; transition: 0.2s; }
        
        .action-bar { display: flex; gap: 20px; margin-top: 40px; justify-content: center; flex-wrap: wrap; }
        .btn-call { 
            background: #25d366; color: white; padding: 14px 30px; 
            border-radius: 50px; text-decoration: none; font-weight: bold; 
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3); transition: 0.3s;
        }
        .btn-call:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4); }
    </style>
</head>
<body>

<div class="container" id="printableArea">
    <div class="lang-bar">
        <button class="lang-btn active" onclick="setLanguage('am', this)">·ä†·àõ·à≠·äõ</button>
        <button class="lang-btn" onclick="setLanguage('en', this)">English</button>
        <button class="lang-btn" onclick="setLanguage('om', this)">Oromoo</button>
        <button class="lang-btn" onclick="setLanguage('so', this)">Soomaali</button>
        <button class="lang-btn" onclick="setLanguage('ti', this)">·âµ·åç·à≠·äõ</button>
    </div>

    <div class="school-banner">
        <h1 id="t_school">DAMOT GENERAL SECONDARY SCHOOL</h1>
        <p id="t_slogan" style="margin:0; opacity:0.8; font-weight:300;">Quality Education for a Better Future</p>
    </div>

    <div id="loginSection" class="login-card">
        <h2 id="t_welcome">·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°!</h2>
        <input type="text" id="regName" placeholder="Full Name (·àô·àâ ·àµ·àù)">
        <input type="text" id="regID" placeholder="Admission Number (·àò·àà·ã´ ·âÅ·å•·à≠)">
        <input type="password" id="regPass" placeholder="Password (·ã®·ã≠·àà·çç ·âÉ·àç)">
        <button class="btn-main" id="t_viewBtn" onclick="loadStudentResult()">·ãç·å§·âµ ·ã≠·àò·àç·ä®·â±</button>
    </div>

    <div id="resultArea">
        <div class="profile-header">
            <img id="pPhoto" src="https://via.placeholder.com/150" class="student-photo" alt="Student Photo">
            <div id="pName"></div>
            <div style="color: var(--primary); font-weight: 900; font-size: 14px; margin-top: 5px;" id="pIDLabel">OFFICIAL STUDENT REPORT CARD</div>
        </div>
        
        <div class="grid-info">
            <div class="info-cell"><label id="l_id">Admission No</label><div id="pID"></div></div>
            <div class="info-cell"><label id="l_gen">Gender</label><div id="pGen"></div></div>
            <div class="info-cell"><label id="l_grade">Grade & Section</label><div id="pGrade"></div></div>
            <div class="info-cell"><label id="l_year">Academic Year</label><div id="pYear"></div></div>
            <div class="info-cell"><label id="l_nat">Nationality</label><div id="pNat"></div></div>
            <div class="info-cell"><label id="l_zone">Zone</label><div id="pZone"></div></div>
            <div class="info-cell"><label id="l_wor">Woreda</label><div id="pWor"></div></div>
            <div class="info-cell"><label id="l_sch">School</label><div id="pSch"></div></div>
        </div>

        <div class="summary-ribbon">
            <div class="ribbon-item"><span id="l_total">Total Score</span><b id="pTotal"></b></div>
            <div class="ribbon-item"><span id="l_avg">Average (%)</span><b id="pAvg"></b></div>
            <div class="ribbon-item"><span id="l_status">Status</span><b id="pStatus"></b></div>
        </div>

        <table>
            <thead>
                <tr>
                    <th id="h_sub">Subject</th>
                    <th>40%</th>
                    <th>60%</th>
                    <th id="h_tot">Total</th>
                    <th id="h_grd">Grade</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>

        <div class="action-bar">
            <button class="btn-main" style="background:#2d3748; margin:0; padding: 14px 30px; border-radius:50px; font-size:14px;" id="t_download" onclick="downloadPDF()">Download PDF Report</button>
            <a href="tel:0961364574" class="btn-call">üìû <span id="t_call">Complaint: 0961364574</span></a>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
    const translations = {
        am: { school: "·ã≥·àû·âµ ·ä†·å†·âÉ·àã·ã≠ ·àÅ·àà·â∞·äõ ·ã∞·à®·åÉ ·âµ·àù·àÖ·à≠·âµ ·â§·âµ", slogan: "·å•·à´·âµ ·ã´·àà·ãç ·âµ·àù·àÖ·à≠·âµ ·àà·â∞·àª·àà ·àò·åª·ä¢", welcome: "·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°!", viewBtn: "·ãç·å§·âµ ·ã≠·àò·àç·ä®·â±", l_id: "·àò·àà·ã´ ·âÅ·å•·à≠", l_gen: "·åæ·â≥", l_grade: "·ä≠·çç·àç·äì ·à¥·ä≠·àΩ·äï", l_year: "·âµ·àù·àÖ·à≠·âµ ·ãò·àò·äï", l_nat: "·ãú·åç·äê·âµ", l_zone: "·ãû·äï", l_wor: "·ãà·à®·ã≥", l_sch: "·âµ·àù·àÖ·à≠·âµ ·â§·âµ", l_total: "·å†·âÖ·àã·àã ·ãç·å§·âµ", l_avg: "·ä†·àõ·ä´·ã≠", l_status: "·àÅ·äî·â≥", h_sub: "·âµ·àù·àÖ·à≠·âµ", h_tot: "·ãµ·àù·à≠", h_grd: "·ã∞·à®·åÉ", download: "·ãç·å§·âµ ·ä†·ãç·à≠·ãµ (PDF)", call: "·âÖ·à¨·â≥ ·àà·àõ·âÖ·à®·â•: 0961364574", report: "·ã≠·àÖ ·ã®·â∞·àõ·à™·ãç ·ä¶·çä·à¥·àã·ãä ·ãç·å§·âµ ·àò·åç·àà·å´ ·äê·ãç" },
        en: { school: "DAMOT GENERAL SECONDARY SCHOOL", slogan: "Quality Education for a Better Future", welcome: "Welcome Back!", viewBtn: "View Result Now", l_id: "Admission No", l_gen: "Gender", l_grade: "Grade & Section", l_year: "Academic Year", l_nat: "Nationality", l_zone: "Zone", l_wor: "Woreda", l_sch: "School", l_total: "Total Score", l_avg: "Average", l_status: "Status", h_sub: "Subject", h_tot: "Total", h_grd: "Grade", download: "Download PDF Report", call: "Complaint: 0961364574", report: "OFFICIAL STUDENT REPORT CARD" },
        om: { school: "MANA BARUMSA DAMOT", slogan: "Barnoota Qulqulluu Jireenya Wayyaaf", welcome: "Baga Nagaan Dhuftan!", viewBtn: "Bu'aa Ilaali", l_id: "ID Galmee", l_gen: "Korniyaa", l_grade: "Kutaa & Seeksinii", l_year: "Bara Barnootaa", l_nat: "Lammummaa", l_zone: "Zoonii", l_wor: "Aanaa", l_sch: "Mana Barumsaa", l_total: "Ida'ama", l_avg: "Giddu-galeessa", l_status: "Haala", h_sub: "Barnoota", h_tot: "Total", h_grd: "Gireedii", download: "PDF Buusi", call: "Koomii: 0961364574", report: "GABAASA BU'AA BARATAA" },
        so: { school: "DUGSIYADA SARE EE DAMOT", slogan: "Waxbarasho tayo leh mustaqbal wanaagsan", welcome: "Ku soo dhawaada!", viewBtn: "Arag Natiijada", l_id: "ID-ga", l_gen: "Lab/Dhadig", l_grade: "Fasalka & Qaybta", l_year: "Sannad Dugsiyeedka", l_nat: "Dhalashada", l_zone: "Aagga", l_wor: "Degmada", l_sch: "Dugsiga", l_total: "Warta", l_avg: "Celceliska", l_status: "Xaaladda", h_sub: "Maadada", h_tot: "Total", h_grd: "Darajada", download: "Soo deji PDF", call: "Cabashada: 0961364574", report: "WARBIXINTA NATIIJADA ARDAYGA" },
        ti: { school: "·ã≥·àû·âµ ·ä´·àç·ä£·ã≠ ·ã∞·à®·åÉ ·â§·âµ ·âµ·àù·àÖ·à≠·â≤", slogan: "·çÖ·à¨·âµ ·ãò·àà·ãé ·âµ·àù·àÖ·à≠·â≤ ·äï·ãù·â†·àà·çÄ ·àò·çÉ·ä¢", welcome: "·ä•·äï·ä≥·ãï ·â•·ã∞·àì·äï ·àò·åª·ä•·ä©·àù!", viewBtn: "·ãç·åΩ·ä¢·âµ ·à≠·ä†", l_id: "·àò·çç·àà·ã™ ·âë·çÖ·à™", l_gen: "·çÜ·â≥", l_grade: "·ä≠·çç·àä & ·à¥·ä≠·àΩ·äï", l_year: "·ãì·àò·âµ ·âµ·àù·àÖ·à≠·â≤", l_nat: "·ãú·åç·äê·âµ", l_zone: "·ãû·â£", l_wor: "·ãà·à®·ã≥", l_sch: "·â§·âµ ·âµ·àù·àÖ·à≠·â≤", l_total: "·å†·âï·àã·àã ·ãç·çÖ·ä¢·âµ", l_avg: "·àõ·ä•·ä®·àã·ã≠", l_status: "·ä©·äê·â≥·âµ", h_sub: "·âµ·àù·àÖ·à≠·â≤", h_tot: "·ãµ·àù·à≠", h_grd: "·ã∞·à®·åÉ", download: "PDF ·ä£·ãç·à≠·ãµ", call: "·âÖ·à¨·â≥ ·äï·àù·âï·à´·â•: 0961364574", report: "·ãà·åç·ãì·ãä ·àò·åç·àà·çÇ ·ãç·çÖ·ä¢·âµ ·â∞·àù·àÉ·à´·ã≠" }
    };

    function setLanguage(lang, btn) {
        const t = translations[lang] || translations['en'];
        document.getElementById('t_school').innerText = t.school;
        document.getElementById('t_slogan').innerText = t.slogan;
        document.getElementById('t_welcome').innerText = t.welcome;
        document.getElementById('t_viewBtn').innerText = t.viewBtn;
        document.getElementById('l_id').innerText = t.l_id;
        document.getElementById('l_gen').innerText = t.l_gen;
        document.getElementById('l_grade').innerText = t.l_grade;
        document.getElementById('l_year').innerText = t.l_year;
        document.getElementById('l_nat').innerText = t.l_nat;
        document.getElementById('l_zone').innerText = t.l_zone;
        document.getElementById('l_wor').innerText = t.l_wor;
        document.getElementById('l_sch').innerText = t.l_sch;
        document.getElementById('l_total').innerText = t.l_total;
        document.getElementById('l_avg').innerText = t.l_avg;
        document.getElementById('l_status').innerText = t.l_status;
        document.getElementById('h_sub').innerText = t.h_sub;
        document.getElementById('h_tot').innerText = t.h_tot;
        document.getElementById('h_grd').innerText = t.h_grd;
        document.getElementById('t_download').innerText = t.download;
        document.getElementById('t_call').innerText = t.call;
        document.getElementById('pIDLabel').innerText = t.report;

        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        if(btn) btn.classList.add('active');
    }

    const firebaseConfig = {
      apiKey: "AIzaSyDqX185jJuZU5SGEjVVNCGNh5aS0hgov58",
      authDomain: "damoto-school-result.firebaseapp.com",
      databaseURL: "https://damoto-school-result-default-rtdb.firebaseio.com",
      projectId: "damoto-school-result",
      storageBucket: "damoto-school-result.firebasestorage.app",
      messagingSenderId: "419800691638",
      appId: "1:419800691638:web:d08ae5311b85f24bb28717"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function loadStudentResult() {
        const nameInput = document.getElementById('regName').value.trim();
        const id = document.getElementById('regID').value.trim();
        const pass = document.getElementById('regPass').value.trim();

        db.ref('students/' + id).once('value').then(snap => {
            const data = snap.val();
            if(data && data.password == pass && data.name.toLowerCase() === nameInput.toLowerCase()) {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('resultArea').style.display = 'block';

                document.getElementById('pPhoto').src = data.photoURL || "https://via.placeholder.com/150";
                
                const nameArr = data.name.split(' ');
                let coloredName = "";
                nameArr.forEach((word, idx) => {
                    let cls = idx === 0 ? "name-green" : idx === 1 ? "name-yellow" : "name-red";
                    coloredName += `<span class="${cls}">${word}</span> `;
                });
                document.getElementById('pName').innerHTML = coloredName;

                document.getElementById('pID').innerText = id;
                document.getElementById('pGen').innerText = data.gender || "M/F";
                document.getElementById('pGrade').innerText = (data.grade || "10") + " (" + (data.section || "A") + ")";
                document.getElementById('pYear').innerText = data.academicYear || "2018 E.C";
                document.getElementById('pNat').innerText = data.nationality || "Ethiopian";
                document.getElementById('pZone').innerText = data.zone || "East Gojjam";
                document.getElementById('pWor').innerText = data.woreda || "Hulet Eju Enese";
                document.getElementById('pSch').innerText = data.school || "Damot General Secondary";
                
                document.getElementById('pTotal').innerText = data.total || "0";
                document.getElementById('pAvg').innerText = (data.average || "0") + "%";
                
                const statusElem = document.getElementById('pStatus');
                const studentStatus = data.status || "PASSED";
                statusElem.innerText = studentStatus;
                
                if(studentStatus.toUpperCase() === "PASSED") {
                    statusElem.className = "status-passed";
                } else {
                    statusElem.className = "";
                    statusElem.style.color = "#e63946";
                    statusElem.style.fontWeight = "900";
                }

                const subs = [
                    {n: "Mathematics", s40: data.maths40, s60: data.maths60, t: data.maths},
                    {n: "English", s40: data.english40, s60: data.english60, t: data.english},
                    {n: "Biology", s40: data.biology40, s60: data.biology60, t: data.biology},
                    {n: "Chemistry", s40: data.chemistry40, s60: data.chemistry60, t: data.chemistry},
                    {n: "Physics", s40: data.physics40, s60: data.physics60, t: data.physics},
                    {n: "Geography", s40: data.geography40, s60: data.geography60, t: data.geography},
                    {n: "History", s40: data.history40, s60: data.history60, t: data.history},
                    {n: "Amharic", s40: data.amharic40, s60: data.amharic60, t: data.amharic}
                ];

                let rows = "";
                subs.forEach(s => {
                    let g = s.t >= 90 ? "A+" : s.t >= 80 ? "A" : s.t >= 70 ? "B" : s.t >= 50 ? "C" : "D";
                    rows += `<tr><td style="text-align:left; font-weight:500;">${s.n}</td><td>${s.s40||0}</td><td>${s.s60||0}</td><td><b style="color:var(--primary)">${s.t||0}</b></td><td><b>${g}</b></td></tr>`;
                });
                document.getElementById('tableBody').innerHTML = rows;
            } else { alert("Incorrect Name, ID or Password!"); }
        });
    }

    function downloadPDF() {
        const element = document.getElementById('printableArea');
        const opt = {
            margin: 0.5,
            filename: 'Student_Result_2018.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }
</script>
</body>
</html>